<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>zhuce</title>
    <link rel="stylesheet" href="css/public.css">
    <link rel="stylesheet" href="css/zhuce.css">
</head>
<body>
    <div id="logo">
        <div class="margin">
            <a href="../index.html" class="a"><img src="../img/logo.png" alt=""></a>
            <div class="right">
                <span>已注册可</span>
                <a href="login.html">在此登录</a>
            </div>
        </div>
    </div>

    <div id="zhuce">
        <div class="margin">
            <div class="b">
                用 户 名 &nbsp;&nbsp;&nbsp;<input type="text" id="tex1" value="请设置用户名"><span></span><br>
                设置密码&nbsp;&nbsp;&nbsp;<input type="text" id="tex2" value="请设置您的登录密码"><span></span><br>
                确认密码&nbsp;&nbsp;&nbsp;<input type="text" id="tex3" value="请再次输入您的登录密码"><span></span><br>
                手机号码&nbsp;&nbsp;&nbsp;<input type="text" id="tex4" value="可用于登录和找回密码"><span></span><br>
                验 证 码 &nbsp;&nbsp;&nbsp;<input type="text" id="tex5" value="请输入验证码"><span></span><br>
                <div class="an">
                    请按住滑块，拖动到右边验证
                    <p><i>>></i></p>
                </div>
                <input type="checkbox">我已阅读并同意《用户注册协议》<br>
                <input type="button" id="btn" value="立即注册">
            </div>
            
        </div>
    </div>

    <!--底部2-->
    <div id="footer2">
        <div class="margin">
            <a href="#">首页</a>
            <span>|</span>
            <a href="#">隐私保护</a>
            <span>|</span>
            <a href="#">联系我们</a>
            <span>|</span>
            <a href="#">免责条款</a>
            <span>|</span>
            <a href="#">公司简介</a>
            <span>|</span>
            <a href="#">意见反馈</a>
            <span>|</span>
            <p>©2017-2019 zhangdacong.com 版权所有 ICP备案证书号36127388 FLOWER by 大葱鲜花预订</p>
        </div>
    </div>
</body>
<script>

    var ot1 = document.getElementById("tex1");
    var ot2 = document.getElementById("tex2");
    var ot3 = document.getElementById("tex3");
    var ot4 = document.getElementById("tex4");
    var ot5 = document.getElementById("tex5");
    var btn=document.getElementById("btn");

    var tex1=tex2=tex3=tex4=tex5=0;

    var oan=document.querySelector(".an");        
    var oi=document.querySelector(".an i");
    var op=document.querySelector(".an p");

    ot1.onfocus=function(){
        this.value="";
        this.innerHTML=this.value;
        ot1.style.color="black";
    }
    ot1.onblur=function(){
        var reg=/^[^\d][a-z0-9A-Z]{6,20}$/;
        if(reg.test(this.value)){
            this.nextElementSibling.innerHTML="成功!";
            tex1 = 1;
        }else{
            alert("用户名只能包含数字、字母、下划线，且不能以数字开头，长度在6-20位之间");
            tex1 = 0;
        }
    }

    //6~18位,数字，字母大小写，特殊符号
    ot2.onfocus=function(){
        this.value="";
        this.innerHTML=this.value;
        ot2.style.color="black";
    }
    ot2.onblur=function(){
        var reg = /^.{6,18}$/;
        if(!reg.test(this.value)){
            this.nextElementSibling.innerHTML="长度不符";
			tex2=0;
			return;
        }
        var num=az=ts=0;
			var numReg=/\d/;
			if(numReg.test(this.value)){
				num=1;
			}
			var azReg=/[a-zA-Z]/;
			if(azReg.test(this.value)){
				az=1;
			}
			var tsReg=/[^\da-zA-Z]/;
			if(tsReg.test(this.value)){
				ts=1;
			}
			switch(num+az+ts){
				case 1:
				    this.nextElementSibling.innerHTML="简单";break;
				case 2:
				    this.nextElementSibling.innerHTML="一般";break;
				case 3:
				    this.nextElementSibling.innerHTML="复杂";break;    
			}
			text2=1;
    }


    ot3.onfocus=function(){
        this.value="";
        this.innerHTML=this.value;
        ot3.style.color="black";
    }
    ot3.onblur=function(){
        //this.value=ot2.value;
        if(this.value === ot2.value){
            this.nextElementSibling.innerHTML = "成功!";
            tex3=1;
        }else{
            alert("您的二次密码输入有误，请输入相同密码");
            tex3 = 0;
        }
    }
    
    ot4.onfocus=function(){
        this.value="";
        this.innerHTML=this.value;
        ot4.style.color="black";
        }
    ot4.onblur = function(){
        var reg = /^1[3-9]\d{9}$/;
        if(reg.test(this.value)){
            this.nextElementSibling.innerHTML = "成功!";
            tex4 = 1;
        }else{
            alert("请输入正确的手机号");
            tex4 = 0;
        }
    }
    ot5.onfocus=function(){
        this.value="";
        this.innerHTML=this.value;
        ot5.style.color="black";
    }
    ot5.onblur=function(){
        var reg=/^[a-zA-Z0-9]{4}$/;
        if(reg.test(this.value)){
            this.nextElementSibling.innerHTML = "成功!";
            tex5 = 1;
        }else{
            alert("请输入正确的验证码");
            tex5 = 0;
        }
    }

    //按下i事件
    oi.onmousedown = function(eve){
        var e = eve || window.event;
        var x = e.offsetX;
        document.onmousemove = function(eve){
            var e = eve || window.event;
            var l = e.clientX - x - oan.offsetLeft;
            if(l<=0) l=0;
            if(l>oan.offsetWidth-oi.offsetWidth){
                l = oan.offsetWidth-oi.offsetWidth
            }
            
            oi.style.left=l+"px";
            op.style.width=l+"px";
            
            document.onmouseup = function(){
                op.innerHTML="验证成功！";
                document.onmousemove = null;
                document.onmouseup = null;
            }
        }
    }

    btn.onclick = function(){
        if(tex1 && tex2 && tex3 && tex4 && tex5){
            alert("提交成功")
        }else{
            if(tex1 == 0){
                alert("用户名输入失败")
            }
            if(tex2 == 0){
                alert("密码输入失败")
            } 
            if(tex3 == 0){
                alert("密码与上次不符")
            }
            if(tex4 == 0){
                alert("手机号失败")
            }
            if(tex5 == 0){
                alert("验证码失败")
            }
        }
    }

</script>


    






</html>